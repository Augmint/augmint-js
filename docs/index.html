<!doctype html>
<html class="default no-js">
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title>@augmint/js</title>
	<meta name="description" content="">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="stylesheet" href="assets/css/main.css">
</head>
<body>
<header>
	<div class="tsd-page-toolbar">
		<div class="container">
			<div class="table-wrap">
				<div class="table-cell" id="tsd-search" data-index="assets/js/search.js" data-base=".">
					<div class="field">
						<label for="tsd-search-field" class="tsd-widget search no-caption">Search</label>
						<input id="tsd-search-field" type="text" />
					</div>
					<ul class="results">
						<li class="state loading">Preparing search index...</li>
						<li class="state failure">The search index is not available</li>
					</ul>
					<a href="index.html" class="title">@augmint/js</a>
				</div>
				<div class="table-cell" id="tsd-widgets">
					<div id="tsd-filter">
						<a href="#" class="tsd-widget options no-caption" data-toggle="options">Options</a>
						<div class="tsd-filter-group">
							<div class="tsd-select" id="tsd-filter-visibility">
								<span class="tsd-select-label">All</span>
								<ul class="tsd-select-list">
									<li data-value="public">Public</li>
									<li data-value="protected">Public/Protected</li>
									<li data-value="private" class="selected">All</li>
								</ul>
							</div>
							<input type="checkbox" id="tsd-filter-inherited" checked />
							<label class="tsd-widget" for="tsd-filter-inherited">Inherited</label>
						</div>
					</div>
					<a href="#" class="tsd-widget menu no-caption" data-toggle="menu">Menu</a>
				</div>
			</div>
		</div>
	</div>
	<div class="tsd-page-title">
		<div class="container">
			<ul class="tsd-breadcrumb">
				<li>
					<a href="globals.html">Globals</a>
				</li>
			</ul>
			<h1> @augmint/js</h1>
		</div>
	</div>
</header>
<div class="container container-main">
	<div class="row">
		<div class="col-8 col-content">
			<div class="tsd-panel tsd-typography">
				<p><span style="display:block;text-align:center"><img src="http://www.augmint.cc/android-chrome-192x192.png" alt="Augmint">
				</span></p>
				<h1 id="augmint-stable-digital-tokens-javascript-library-wip-">Augmint - Stable Digital Tokens - Javascript Library (WIP)</h1>
				<p><a href="https://travis-ci.com/Augmint/augmint-js"><img src="https://travis-ci.com/Augmint/augmint-js.svg?branch=staging" alt="Build Status"></a>
					<a href="https://discord.gg/PwDmsnu"><img src="https://img.shields.io/discord/407574313810788364.svg" alt="Discord"></a>
				<a href="https://github.com/Augmint/augmint-js/blob/master/LICENSE"><img src="https://img.shields.io/github/license/Augmint/augmint-js.svg" alt="license"></a> <a href="https://greenkeeper.io/"><img src="https://badges.greenkeeper.io/Augmint/augmint-js.svg" alt="Greenkeeper badge"></a></p>
				<p>Decentralised stable cryptocurrency on Ethereum</p>
				<h2 id="concept">Concept</h2>
				<p>Decentralized stablecoins targeted to fiat currencies built on Ethereum.</p>
				<p>The first Augmint token is AEUR.</p>
				<p><strong>1 AEUR â‰ˆ 1 EUR.</strong></p>
				<ul>
					<li>Buy and sell AEUR for ETH or EUR.</li>
					<li>Get a loan in AEUR by depositing ETH.</li>
					<li>Lock AEUR to earn a premium.</li>
				</ul>
				<p>Try it: <strong><a href="http://www.augmint.org">https://www.augmint.org</a></strong></p>
				<p><strong><a href="https://www.augmint.org/manifesto">Manifesto</a></strong></p>
				<p><strong><a href="http://bit.ly/augmint-wp">White Paper</a></strong></p>
				<h3 id="related-repos">Related repos</h3>
				<ul>
					<li><a href="https://github.com/Augmint/augmint-web">Web frontend</a></li>
					<li><a href="https://github.com/Augmint/augmint-contracts">augmint-contracts</a></li>
				</ul>
				<h2 id="augmint-js-lib">augmint-js lib</h2>
				<p>This lib is heavily under construction. Anything can happen.</p>
				<h3 id="install">Install</h3>
				<pre><code><span class="hljs-selector-tag">yarn</span> <span class="hljs-selector-tag">add</span> @<span class="hljs-keyword">augmint</span>/<span class="hljs-keyword">js</span></code></pre><p>or</p>
				<pre><code><span class="hljs-built_in">npm</span> install @augmint/js</code></pre><h3 id="example-use">Example use</h3>
				<pre><code class="language-js"><span class="hljs-keyword">import</span> { Augmint } <span class="hljs-keyword">from</span> <span class="hljs-string">"@augmint/js"</span>;

<span class="hljs-keyword">let</span> web3;

<span class="hljs-comment">// Modern dapp browsers...</span>
<span class="hljs-keyword">if</span> (<span class="hljs-built_in">window</span>.ethereum) {
  web3 = <span class="hljs-keyword">new</span> Web3(<span class="hljs-built_in">window</span>.ethereum);
  <span class="hljs-keyword">await</span> <span class="hljs-built_in">window</span>.ethereum.enable();
} <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> <span class="hljs-built_in">window</span>.web3 !== <span class="hljs-string">"undefined"</span>) {
  <span class="hljs-comment">// Legacy dapp browsers...</span>
  web3 = <span class="hljs-keyword">new</span> Web3(<span class="hljs-built_in">window</span>.web3.currentProvider);
} <span class="hljs-keyword">else</span> {
   <span class="hljs-comment">// no web3... augmint-js still can be used via Infura websocket connection</span>
}

<span class="hljs-keyword">let</span> connectionConfig;
<span class="hljs-keyword">if</span> (web3) {
  <span class="hljs-comment">// For connection via injected provider:</span>
  connectionConfig = {
    <span class="hljs-attr">givenProvider</span>: web3.currentProvider,
    <span class="hljs-comment">// We assume that injected Metamask/Trustwallet/Metacoin etc. provider takes care of reconnections</span>
    ETHEREUM_CONNECTION_CHECK_INTERVAL: <span class="hljs-number">0</span>
  };
} <span class="hljs-keyword">else</span> {
  <span class="hljs-comment">// For connection via Infura (not passing givenProvider)</span>
  connectionConfig = {
    <span class="hljs-attr">PROVIDER_URL</span>: <span class="hljs-string">"wss://rinkbey.infura.io/ws/v3/"</span>, <span class="hljs-comment">// or wss://mainnet.infura.io/ws/v3/ or  ws://localhost:8545</span>
    PROVIDER_TYPE: <span class="hljs-string">"websocket"</span>,
    <span class="hljs-attr">INFURA_PROJECT_ID</span>: <span class="hljs-string">""</span> <span class="hljs-comment">// this should come from env.local or hosting env setting</span>
  };
}

<span class="hljs-keyword">const</span> augmint = <span class="hljs-keyword">await</span> Augmint.create(connectionConfig);

<span class="hljs-comment">// To catch errors you need to use txHash / confirmation / receipt getters:</span>
<span class="hljs-keyword">try</span> {

<span class="hljs-keyword">const</span> tx = augmint.rates.setRate(CCY, rate)
  <span class="hljs-comment">// optionally you can sign with a privatekey</span>
  <span class="hljs-comment">// .sign(privatekey, {from: "0x06012c8cf97BEaD5deAe237070F9587f8E7A266d"} )</span>
  <span class="hljs-comment">//</span>
  <span class="hljs-comment">// or send it if provider like MetaMask manages the signature for the given sender address</span>
  .send([{ <span class="hljs-attr">from</span>: <span class="hljs-string">"0x06012c8cf97BEaD5deAe237070F9587f8E7A266d"</span> }]) <span class="hljs-comment">// {from: 0x..} only needed if it's not signed</span>
  .onceTxHash( <span class="hljs-function"><span class="hljs-params">txHash</span> =&gt;</span> {.. })
  .onceReceipt( <span class="hljs-function"><span class="hljs-params">receipt</span> =&gt;</span> { ...})
  .onConfirmation( <span class="hljs-function"><span class="hljs-params">confirmationNumber</span> =&gt;</span> {...}
  .onceReceiptConfirmed(<span class="hljs-number">5</span>, receipt =&gt; {...})
  .onceTxRevert( <span class="hljs-function">(<span class="hljs-params">error, receipt</span>) =&gt;</span> { ....});


  <span class="hljs-keyword">const</span> txHash = <span class="hljs-keyword">await</span> tx.getTxHash();

  <span class="hljs-comment">// receipt as soon as we got it (even with 0 confirmation):</span>
  <span class="hljs-keyword">const</span> txReceipt = <span class="hljs-keyword">await</span> tx.getReceipt();

  <span class="hljs-comment">// receipt after x confirmation:</span>
  <span class="hljs-keyword">const</span> confirmedReceipt = <span class="hljs-keyword">await</span> tx.getConfirmedReceipt(<span class="hljs-number">12</span>);

} <span class="hljs-keyword">catch</span> (error) {
  <span class="hljs-comment">// .send / sign throwing or rejecting with sending errors but not when tx reverts!</span>
  <span class="hljs-comment">// Also, you need to take care of timeouts. E.g. use Augmint.utils.promiseTimeout()</span>
 }

 <span class="hljs-comment">// receipt you need to check for receipt.status if tx was Reverted or not.</span>
<span class="hljs-keyword">if</span> (confirmedReceipt.status) {
  <span class="hljs-comment">// all good</span>
} <span class="hljs-keyword">else</span> {
  <span class="hljs-comment">// this tx was reverted</span>
}</code></pre>
				<p>Specs: <a href="https://github.com/Augmint/augmint-js/blob/tx_reorg/test/Transaction.test.js">test/Transaction.test.js</a></p>
				<h3 id="more-examples">More examples</h3>
				<ul>
					<li><a href="https://github.com/Augmint/augmint-js/blob/tx_reorg/test/Rates.setters.test.js">test/Rates.setters.test.js</a></li>
					<li><a href="https://github.com/Augmint/augmint-js/blob/tx_reorg/test/Exchange.Matching.onchain.test.js">test/Exchange.Matching.onchain.test.js</a></li>
				</ul>
				<h3 id="web3-js-event-style">Web3.js event style</h3>
				<p>Deprecated and discouraged but kept for backward compatibility with web3js style events:</p>
				<pre><code class="language-js">tx.on[ce](<span class="hljs-string">"transactionHash"</span> | <span class="hljs-string">"receipt"</span> | <span class="hljs-string">"confirmation"</span> | <span class="hljs-string">"error"</span>);
<span class="hljs-comment">// This way it can be easily plugged into dapps which are handling web3js tx objects:</span>
<span class="hljs-comment">//   augmint-js Transaction object can be a drop in as an almost direct replacement of webjs transactioObject</span></code></pre>
				<p>Specs: <a href="https://github.com/Augmint/augmint-js/blob/tx_reorg/test/Transaction.web3jsStyle.test.js">test/Transaction.web3jsStyle.test.js</a></p>
				<h3 id="construct-a-transaction-with-transaction-class">Construct a transaction with <a href="./src/Transaction.ts"><code>Transaction</code></a> class</h3>
				<p>It&#39;s likely not needed for ordinary <code>augmint-js</code> use</p>
				<pre><code class="language-js"> <span class="hljs-keyword">const</span> web3TxObject = rates.instance.methods.setRate(CCY, <span class="hljs-number">100</span>)
 <span class="hljs-comment">// you can set the gaslimit here or later at send() too</span>
 <span class="hljs-keyword">const</span> augmintRatesTx = <span class="hljs-keyword">new</span> Transaction(ethereumConnection, web3TxObject, { <span class="hljs-attr">gasLimit</span>: <span class="hljs-number">200000</span> } );
 augmintRatesTx.send(...).onTxHash(...)  <span class="hljs-comment">// or sign().send() etc.</span></code></pre>
				<h2 id="augmint-cli">augmint-cli</h2>
				<p>For local development: launch a docker container with test augmint contracts in ganache</p>
				<pre><code>$ yarn augmint-cli  <span class="hljs-comment"># NB: if you are running from within the augmin-js repo then: ./scripts/augmint-cli.sh</span>

augmint-cli : <span class="hljs-keyword">start</span> / <span class="hljs-keyword">stop</span> augmint contracts. Docker image: augmint/contracts:vx.x.x

    <span class="hljs-keyword">Usage</span>: /usr/<span class="hljs-keyword">local</span>/<span class="hljs-keyword">bin</span>/augmint-cli ganache {<span class="hljs-keyword">start</span> | <span class="hljs-keyword">stop</span> | run}
      <span class="hljs-keyword">start</span>: tries <span class="hljs-keyword">to</span> <span class="hljs-keyword">start</span> <span class="hljs-keyword">container</span> named ganache . <span class="hljs-keyword">If</span> fails <span class="hljs-keyword">then</span> runs (downloads, creates <span class="hljs-keyword">and</span> starts) the <span class="hljs-keyword">container</span> <span class="hljs-keyword">from</span> augmint/contracts:vx.x.x
      <span class="hljs-keyword">stop</span>: plain docker <span class="hljs-keyword">stop</span> augmint/contracts:vx.x.x (doesn<span class="hljs-string">'t check if exists)
      run: stops and removes the ganache container if exists. then runs it</span></code></pre><p>Also recreates the container if it exists but image is not as expected (ie. there was a version upgrade)</p>
				<h2 id="publish-npm-package">Publish NPM package</h2>
				<p>bump the version property in the package.json
				release a new version as usual</p>
				<ul>
					<li>merge staging into master</li>
					<li>create a release in github with the vX.X.X tag on master</li>
				</ul>
				<p>before npm publish, you need to build the library:</p>
				<ul>
					<li>checkout the master(!) branch</li>
					<li><code>yarn clean</code></li>
					<li><code>yarn build</code>
					npm publish from master branch. test it with --dry-run</li>
				</ul>
				<h2 id="contributions">Contributions</h2>
				<p>Augmint is an open and transparent project.</p>
				<p>We are looking for great minds to extend our core team. Contributions in any area is much appreciated: development, testing, UX&amp;UI design, legal, marketing, spreading the word etc.</p>
				<p><a href="CODE_OF_CONDUCT.md">Code of Conduct</a></p>
				<h2 id="get-in-touch">Get in touch</h2>
				<ul>
					<li><a href="mailto:hello@augmint.org">hello@augmint.org</a></li>
					<li><a href="https://discord.gg/PwDmsnu">Discord server</a> <a href="https://discord.gg/PwDmsnu"><img src="https://img.shields.io/discord/407574313810788364.svg" alt="Discord"></a></li>
					<li><a href="https://t.me/augmint">Telegram</a></li>
				</ul>
				<h2 id="authors">Authors</h2>
				<p>See team on <a href="https://www.augmint.org">www.augmint.org</a></p>
				<p><img src="https://github.com/Augmint/augmint-web/raw/staging/src/assets/images/decentlabs.png" alt="Decentlabs" width="60" height="60"> The project was born at <a href="http://www.decent.org">DECENT Labs</a></p>
				<h3 id="concept-initial-version">Concept, initial version</h3>
				<ul>
					<li><a href="https://github.com/szerintedmi">szerintedmi</a></li>
					<li><a href="https://github.com/krosza">Charlie</a></li>
				</ul>
				<h2 id="licence">Licence</h2>
				<p>This project is licensed under the GNU Affero General Public License v3.0 license - see the <a href="LICENSE">LICENSE</a> file for details.</p>
			</div>
		</div>
		<div class="col-4 col-menu menu-sticky-wrap menu-highlight">
			<nav class="tsd-navigation primary">
				<ul>
					<li class="globals  ">
						<a href="globals.html"><em>Globals</em></a>
					</li>
					<li class=" tsd-kind-external-module">
						<a href="modules/_abstractcontract_.html">"<wbr>Abstract<wbr>Contract"</a>
					</li>
					<li class=" tsd-kind-external-module">
						<a href="modules/_augmint_.html">"<wbr>Augmint"</a>
					</li>
					<li class=" tsd-kind-external-module">
						<a href="modules/_augminttoken_.html">"<wbr>Augmint<wbr>Token"</a>
					</li>
					<li class=" tsd-kind-external-module">
						<a href="modules/_deployedcontract_.html">"<wbr>Deployed<wbr>Contract"</a>
					</li>
					<li class=" tsd-kind-external-module">
						<a href="modules/_deployedenvironment_.html">"<wbr>Deployed<wbr>Environment"</a>
					</li>
					<li class=" tsd-kind-external-module">
						<a href="modules/_errors_.html">"<wbr>Errors"</a>
					</li>
					<li class=" tsd-kind-external-module">
						<a href="modules/_ethereumconnection_.html">"<wbr>Ethereum<wbr>Connection"</a>
					</li>
					<li class=" tsd-kind-external-module">
						<a href="modules/_exchange_.html">"<wbr>Exchange"</a>
					</li>
					<li class=" tsd-kind-external-module">
						<a href="modules/_loanmanager_.html">"<wbr>Loan<wbr>Manager"</a>
					</li>
					<li class=" tsd-kind-external-module">
						<a href="modules/_loanproduct_.html">"<wbr>Loan<wbr>Product"</a>
					</li>
					<li class=" tsd-kind-external-module">
						<a href="modules/_rates_.html">"<wbr>Rates"</a>
					</li>
					<li class=" tsd-kind-external-module">
						<a href="modules/_transaction_.html">"<wbr>Transaction"</a>
					</li>
					<li class=" tsd-kind-external-module">
						<a href="modules/_constants_.html">"constants"</a>
					</li>
					<li class=" tsd-kind-external-module">
						<a href="modules/_gas_.html">"gas"</a>
					</li>
					<li class=" tsd-kind-external-module">
						<a href="modules/_index_.html">"index"</a>
					</li>
					<li class=" tsd-kind-external-module">
						<a href="modules/_units_.html">"units"</a>
					</li>
					<li class=" tsd-kind-external-module">
						<a href="modules/_utils_index_.html">"utils/index"</a>
					</li>
					<li class=" tsd-kind-external-module">
						<a href="modules/_utils_logger_.html">"utils/logger"</a>
					</li>
					<li class=" tsd-kind-external-module">
						<a href="modules/_utils_promisetimeout_.html">"utils/promise<wbr>Timeout"</a>
					</li>
					<li class=" tsd-kind-external-module">
						<a href="modules/_utils_siginthandler_.html">"utils/sigint<wbr>Handler"</a>
					</li>
				</ul>
			</nav>
			<nav class="tsd-navigation secondary menu-sticky">
				<ul class="before-current">
				</ul>
			</nav>
		</div>
	</div>
</div>
<footer class="with-border-bottom">
	<div class="container">
		<h2>Legend</h2>
		<div class="tsd-legend-group">
			<ul class="tsd-legend">
				<li class="tsd-kind-module"><span class="tsd-kind-icon">Module</span></li>
				<li class="tsd-kind-object-literal"><span class="tsd-kind-icon">Object literal</span></li>
				<li class="tsd-kind-variable"><span class="tsd-kind-icon">Variable</span></li>
				<li class="tsd-kind-function"><span class="tsd-kind-icon">Function</span></li>
				<li class="tsd-kind-function tsd-has-type-parameter"><span class="tsd-kind-icon">Function with type parameter</span></li>
				<li class="tsd-kind-index-signature"><span class="tsd-kind-icon">Index signature</span></li>
				<li class="tsd-kind-type-alias"><span class="tsd-kind-icon">Type alias</span></li>
			</ul>
			<ul class="tsd-legend">
				<li class="tsd-kind-enum"><span class="tsd-kind-icon">Enumeration</span></li>
				<li class="tsd-kind-enum-member"><span class="tsd-kind-icon">Enumeration member</span></li>
				<li class="tsd-kind-property tsd-parent-kind-enum"><span class="tsd-kind-icon">Property</span></li>
				<li class="tsd-kind-method tsd-parent-kind-enum"><span class="tsd-kind-icon">Method</span></li>
			</ul>
			<ul class="tsd-legend">
				<li class="tsd-kind-interface"><span class="tsd-kind-icon">Interface</span></li>
				<li class="tsd-kind-interface tsd-has-type-parameter"><span class="tsd-kind-icon">Interface with type parameter</span></li>
				<li class="tsd-kind-constructor tsd-parent-kind-interface"><span class="tsd-kind-icon">Constructor</span></li>
				<li class="tsd-kind-property tsd-parent-kind-interface"><span class="tsd-kind-icon">Property</span></li>
				<li class="tsd-kind-method tsd-parent-kind-interface"><span class="tsd-kind-icon">Method</span></li>
				<li class="tsd-kind-index-signature tsd-parent-kind-interface"><span class="tsd-kind-icon">Index signature</span></li>
			</ul>
			<ul class="tsd-legend">
				<li class="tsd-kind-class"><span class="tsd-kind-icon">Class</span></li>
				<li class="tsd-kind-class tsd-has-type-parameter"><span class="tsd-kind-icon">Class with type parameter</span></li>
				<li class="tsd-kind-constructor tsd-parent-kind-class"><span class="tsd-kind-icon">Constructor</span></li>
				<li class="tsd-kind-property tsd-parent-kind-class"><span class="tsd-kind-icon">Property</span></li>
				<li class="tsd-kind-method tsd-parent-kind-class"><span class="tsd-kind-icon">Method</span></li>
				<li class="tsd-kind-accessor tsd-parent-kind-class"><span class="tsd-kind-icon">Accessor</span></li>
				<li class="tsd-kind-index-signature tsd-parent-kind-class"><span class="tsd-kind-icon">Index signature</span></li>
			</ul>
			<ul class="tsd-legend">
				<li class="tsd-kind-constructor tsd-parent-kind-class tsd-is-inherited"><span class="tsd-kind-icon">Inherited constructor</span></li>
				<li class="tsd-kind-property tsd-parent-kind-class tsd-is-inherited"><span class="tsd-kind-icon">Inherited property</span></li>
				<li class="tsd-kind-method tsd-parent-kind-class tsd-is-inherited"><span class="tsd-kind-icon">Inherited method</span></li>
				<li class="tsd-kind-accessor tsd-parent-kind-class tsd-is-inherited"><span class="tsd-kind-icon">Inherited accessor</span></li>
			</ul>
			<ul class="tsd-legend">
				<li class="tsd-kind-property tsd-parent-kind-class tsd-is-protected"><span class="tsd-kind-icon">Protected property</span></li>
				<li class="tsd-kind-method tsd-parent-kind-class tsd-is-protected"><span class="tsd-kind-icon">Protected method</span></li>
				<li class="tsd-kind-accessor tsd-parent-kind-class tsd-is-protected"><span class="tsd-kind-icon">Protected accessor</span></li>
			</ul>
			<ul class="tsd-legend">
				<li class="tsd-kind-property tsd-parent-kind-class tsd-is-private"><span class="tsd-kind-icon">Private property</span></li>
				<li class="tsd-kind-method tsd-parent-kind-class tsd-is-private"><span class="tsd-kind-icon">Private method</span></li>
				<li class="tsd-kind-accessor tsd-parent-kind-class tsd-is-private"><span class="tsd-kind-icon">Private accessor</span></li>
			</ul>
			<ul class="tsd-legend">
				<li class="tsd-kind-property tsd-parent-kind-class tsd-is-static"><span class="tsd-kind-icon">Static property</span></li>
				<li class="tsd-kind-call-signature tsd-parent-kind-class tsd-is-static"><span class="tsd-kind-icon">Static method</span></li>
			</ul>
		</div>
	</div>
</footer>
<div class="container tsd-generator">
	<p>Generated using <a href="http://typedoc.org/" target="_blank">TypeDoc</a></p>
</div>
<div class="overlay"></div>
<script src="assets/js/main.js"></script>
<script>if (location.protocol == 'file:') document.write('<script src="assets/js/search.js"><' + '/script>');</script>
</body>
</html>